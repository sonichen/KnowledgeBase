## Bitcoin/Block Chain Technology

- Satoshi Nakamoto提出了比特币的概念，其在2008年10月的一篇论文《比特币：一个点对点的电子现金系统》中描述了这一数字资产和点对点支付系统。
- 第一枚比特币于2009年1月4日挖出，当时1比特币价值0.076美分；第一笔交易发生在1月11日，而软件则于15日以开源形式发布，使得任何有必要技术技能的人都能参与其中。
- 长时间以来，比特币鲜有人关注。然而，大约在2012年的三分之一处，交易量开始呈指数增长。
- 2013年初，比特币的市场资本化也开始沿着同样的趋势增长。



## Double Spending and Byzantine General’s Problem

**Double Spending（双重支付）**：这是指在数字货币系统中，**同一笔资产被多次使用或花费的问题**。由于数字资产的本质，其可以被无限复制，因此存在着一种可能性，即在没有中央机构的情况下，某个人可以多次使用同一笔资产进行支付，从而造成欺诈。

**Byzantine General’s Problem（拜占庭将军问题）**：这是指在分布式系统中，存在着多个节点（将军）需要达成一致的决策，但是**部分节点可能会受到故障或恶意操控，导致信息传递出现错误**。在这种情况下，将军们**需要一种方法来确保他们能够就采取的行动达成共识**，即使在部分节点不可信的情况下也能保持系统的可靠性。

**解决方法**：

Combining BitTorrent peer-to-peer file sharing  technology with **public-key cryptography**

解决双重支付问题的方案是通过将BitTorrent点对点文件共享技术与公钥密码学相结合。具体来说，公钥密码学提供了一种安全的加密和身份验证机制，使得在分布式系统中进行交易时能够保证唯一性和不可篡改性，而BitTorrent技术则提供了一种分布式的数据共享机制，通过网络中多个节点之间的相互连接和数据传输来实现可靠性和冗余性，从而防止了双重支付问题的发生。

## How BitTorrent P2P works?

BitTorrent P2P工作原理是通过分布式网络高效地分享文件：

- 要分享的原始文件称为“torrent”，托管该文件的计算机称为“seed”，将种子文件分割成片段。
- 用户使用BitTorrent客户端请求文件。
- 用户（也称为对等节点）通过对等通信从其他对等节点下载文件的不同部分。
- 每个对等节点同时下载文件的部分并将文件的部分上传给其他节点，形成一个“swarm”。
- 文件越受欢迎，群体中的节点越多，下载速度越快。
- 下载完成后，用户被鼓励继续通过在线保持分享文件来支持他人，这称为“seeding”。
- 在下载完成后立即退出群体而不进行做种被称为“leeching”，这样做会阻碍系统的有效性。



## How PKI works ?

### Technology

Hashing（哈希）

- 哈希函数如SHA256和RIPEMD-160**将任意长度的数字输入转换为固定长度的哈希值**，用于数据的唯一标识和验证。SHA256生成256位的哈希值，RIPEMD-160生成较短的哈希值。

Encryption（加密）

- 对称加密和非对称加密用于数据的保护。
  - 对称加密使用相同的密钥进行加密和解密，适用于需要快速加解密的场景。
  - 非对称加密使用密钥对（公钥和私钥），其中公钥用于加密，私钥用于解密。适用于需要安全传输数据的场景。

Digital Signature（数字签名）

- 数字签名使用ECDSA算法对文档进行签名，确保文件的完整性和真实性。
  - 对文档进行哈希处理以生成哈希值。
  - 使用私钥对哈希值进行加密，生成数字签名。
  - 使用相应的公钥对数字签名进行解密，验证签名的有效性，从而验证文件的真实性和完整性。

### PKI

PKI（公钥基础设施）是一种安全架构，用于管理数字证书，以确保通信的机密性、完整性和真实性。PKI系统包括以下组成部分：

1. **证书颁发机构（CA）**：负责存储、颁发和签署数字证书。CA是PKI体系结构中的核心，其签署的数字证书用于验证实体的身份。
2. **注册机构（RA）**：验证请求数字证书存储在CA中的实体的身份。RA负责确保只有合法的实体才能获得数字证书。
3. **中央目录**：一种安全位置，用于存储和索引密钥和数字证书。
4. **证书管理系统**：管理对存储的数字证书的访问以及颁发证书的交付等任务。该系统负责确保数字证书的有效管理和安全性。
5. **证书策略**：规定PKI的程序要求的文件，目的是允许外部人员分析PKI的可信度。证书策略描述了PKI所遵循的安全标准和流程。

综上所述，**PKI是一个基于公钥加密技术的体系结**构，通过CA、RA、中央目录、证书管理系统和证书策略等组成部分来管理和维护数字证书，从而确保安全的通信和数据传输。

## How Cryptocurrency/Bitcoin works?

## Blockchain Technology / Bitcoin

### Blockchain

- Data structure arranged in blocks which are chained sequentially. 
- Each block is a set of transactions like ledger.
- You can only add blocks, NOT able to change previous blocks

### Bitcoin

Bitcoin blockchain has 2 kinds of transactions:- create coin transaction and transfer coin transaction.

Bitcoin block
A Bitcoin block consists of:

1. **Magic number**：用于标识区块链网络的标识符。其常量值为0xD9B4BEF9，表示区块的开始以及数据来自生产网络。
2. **区块大小（Block size）**：指示区块的大小，自2016年12月以来固定为1 MB，但可扩展到2 GB。
3. **版本（Version）**：指定节点实现的比特币协议的版本。
4. **上一个区块哈希（Previous block hash）**：前一个（最后添加的）区块的区块头的数字指纹（哈希）。通过两次应用加密函数（SHA-256）计算而来。
5. **交易计数器（Transaction Counter）**：包含在区块中的交易数量。
6. **交易列表（Transaction List）**：存储区块中所有交易的哈希。每个交易都有其自己的结构。
7. **时间戳（Timestamp）**：Unix“Epoch”时间戳，表示自1970年1月1日午夜UTC/GMT以来经过的秒数。时间戳必须大于前11个区块的中位时间戳，并小于网络调整时间 + 2小时。
8. **难度目标（Difficulty Target）**：当前难度的数字表示，用于获取预期结果的难度。
9. **随机数（Nonce）**：每10分钟迭代（单个区块创建）的计数器。从0开始递增，直到解决谜题或其他节点解决它。

### Merkle Tree

A Merkle Tree **allows computers on a network to verify individual records (using hash values) without having to review and compare versions of the entire database.**

Merkle树是一种用于有效验证大量数据完整性的数据结构。它通过将数据分成固定大小的块，并计算每个块的哈希值来构建树状结构。然后，通过递归地将相邻的哈希值合并成父节点的方式，最终形成一个树状结构，最终生成一个根哈希值，称为Merkle根。通过比较这个Merkle根和事先公布的根哈希值，可以快速验证整个数据集的完整性，而不需要下载全部数据。Merkle树被广泛应用于比特币和其他区块链中，用于验证交易的有效性和区块的完整性。

### PoW

比特币中的工作量证明（Proof of Work，PoW）是一种共识机制，用于确认交易并添加新区块到区块链中。**PoW机制要求矿工解决一个复杂的数学难题，这个问题的解需要大量的计算能力。解决问题的过程称为挖矿。**矿工通过不断尝试不同的随机值，寻找满足特定条件的哈希值，一旦找到了符合要求的哈希值，就可以生成一个新的区块，并获得一定数量的比特币作为奖励。其他节点在接收到这个新区块后，会验证其有效性，并继续构建区块链。PoW机制的主要目的是确保区块链的安全性和去中心化，因为要攻击区块链需要控制大量的计算资源，成本非常高昂。



## EVM (Ethereum Virtual Machine)

EVM是以太坊虚拟机（Ethereum Virtual Machine）的缩写。

EVM的特点包括：

1. **状态机**: EVM被设计成一个分布式状态机，它定义了以太坊区块链上的状态转换规则。在区块链上的每个区块中，以太坊都有一个唯一的“规范”状态，EVM负责计算从一个区块到下一个区块的有效状态变化。
2. **智能合约**: 除了普通的加密货币交易外，EVM还能够执行智能合约。智能合约是一种在区块链上执行的自动化合约，其功能强大，能够实现复杂的逻辑和业务流程。
3. **机器状态**: EVM维护了一个庞大的数据结构，其中包含所有账户和余额，以及一个机器状态。这个机器状态可以根据预定义的规则在每个区块之间发生变化，并能够执行任意的机器代码。
4. **规则定义**: EVM定义了从一个区块到另一个区块的状态变化的具体规则。这些规则确定了如何处理交易、执行智能合约以及更新区块链上的状态。