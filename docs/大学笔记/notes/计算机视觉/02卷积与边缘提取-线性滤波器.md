---
title: 02卷积与边缘提取-线性滤波器
updated: 2024-01-29T12:30:22.0000000+08:00
created: 2022-12-15T09:29:32.0000000+08:00
---

# 02卷积与边缘提取-线性滤波器
2022年12月15日
9:29

## 1、图像类型
二进制图像：要么0要么1；要么黑要么白

灰度图像：有明暗灰度变化，取值0-255

彩色图像：有三个通道用三个byte存储，分别RGB，每个取值0-255，

![image1](../../assets/e3d06e5f8f0645d0a7e911bb1a97301a.png)

## 2、图像去噪Image denoising
噪声点：有些部分与周围的像素差异大，看起来不舒服

![image2](../../assets/f24cd3a5ee6f422bab9818c933de65fd.jpeg)

怎么去除呢：最直观的想法：把这个点和周围点平均（加权平均），拉的接近一点，看起来就不突兀

这个加权平均的值就是滤波和/卷积核

![image3](../../assets/f5fdd7b79c4141a0ac014b2beed74ff2.png)

## 3、卷积
3.1 卷积的定义

一个点的卷积操作

![image4](../../assets/5040e07c4cca495db5d1dcd9adbb8b91.png)

以上图像翻转有错，应该是中心格顺时针旋转180度

不翻转是滤波，翻转是卷积

每一个点做一次，得到卷积后的图像

卷积的定义

![image5](../../assets/0d9ce49b9942489c8f88e30992bba616.png)

f是图像点的位置

g是内核。

mn是中心点的坐标

kl是取值

![image6](../../assets/9f841b61d93446f5b700ca9b10c73f87.png)

简单来说，卷积的定义是：卷积核记录了权值，把权值套到我要卷积的目标上去，把卷积核和套住的值相乘累加，最后得到一个新值，这就是对原点卷积的结果

3.2 卷积的操作特性

![image7](../../assets/ba3b8e7c525745b59e2367612c2ac7ea.png)

![image8](../../assets/779730aad0b243c3bb907fac7aab2caa.png)

3.3 卷积存在的问题

问题：

如图2，模板没有对应像素点，怎么计算？

图像会变小

![image9](../../assets/f064d4880e484442be7d310b40c5da00.png)

怎么办：先把图像扩大一圈，对图像填充

目的都是：为了输入和输出有固定大小

![image10](../../assets/77d84c582fc34981a7ed74d435330b41.png)

怎么填充

methods:

– clip filter (black)

– wrap around

– copy edge

– reflect across edge

1.周围填一圈0
| 卷积前                                                                                                                  | 卷积后                                                                                                                |
|-------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------|
| ![image11](../../assets/7a683ceedffc4173bb9c3830ba006868.png) | ![image12](../../assets/805a5cba71f149d2a2f7b3f9b2321e04.png) |

2.桶装，绕一圈外扩
| 卷积前                                                                                                                  | 卷积后                                                                                                                  |
|-------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------|
| ![image13](../../assets/4ffebd70fd7348b2921fbed8e7dc8dfa.png) | ![image14](../../assets/16306efc0fc3426e8c5aba4572f6f5e9.png) |

3.直接向外拉伸
<table>
<colgroup>
<col style="width: 52%" />
<col style="width: 47%" />
</colgroup>
<thead>
<tr class="header">
<th>卷积前</th>
<th>卷积后</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>![image15](../../assets/7cfff6a91b07413f9d000d68b99d058e.png)</td>
<td><p>![image16](../../assets/a26021e543784118a8437a7221ed3bb5.png)</p>
<p></p></td>
</tr>
</tbody>
</table>

滤波器例子

![image17](../../assets/10b3eb4d89294cbba3c5ba92796566a9.png)

相当于处理后，我右边的点成了我，相当于把右边的东西移给我自己，就是左移

![image18](../../assets/9c5011ee537c46a9974bb930009e2514.png)

平滑操作，显得模糊

人对比较尖锐的信号有注意，现在他们被平滑了，所以模糊

![image19](../../assets/c08733f1510f48cf82fcbc51c4e71c4e.png)

锐化，棱角分明

![image20](../../assets/a367da1d4db64dd1b5787d154b061c4c.png)

![image21](../../assets/a6b5579f46754316902247856ae29c8b.png)

为什么？不太明白

![image22](../../assets/4e178a93169c4b8397565c13871b06ba.png)

## 4、高斯核
模板存在问题：

![image23](../../assets/36f689eb853843129dd8b7b53c14da2b.png)

希望的模板是什么样子的

为了消除边缘效应，根据邻域像素与中心的接近程度进行权重贡献

![image24](../../assets/53d03e3652b342c9b3931cd4a3f4a5a4.png)

引出高斯函数

**产生高斯模板的步骤**

**1.确定σ**

**2.确定窗宽**

**3.归一化**

前面的常数因子使体积和为1（在计算过滤器值时可以忽略，因为在任何情况下我们都应该重整权值为和为1）

![image25](../../assets/45d070cee89e4e0d86167f701f8513ec.png)

有进行归一化

![image26](../../assets/aa8e6d462e014306970531398e0fc994.png)

5 X 5：窗宽

σ标准差：决定了平滑的程度，σ越小，越集中，σ越大，滤波效果越强

![image27](../../assets/818a10b2052d485e987bbc434b563ca5.png)

一般来说，**窗宽=3σ\*2+1，**

**比如**σ=1时，窗宽7 X 7

![image28](../../assets/593ec8e3f2ad41f3a816f78680fc0525.png)

![image29](../../assets/9c674a981d0144b4b95584f494bd4722.png)

总结：

用高斯生成卷积核是为了去噪

一个大高斯核卷积图像的效果 等同于 两个小高斯核卷积产生的效果

高斯核也可以分解

![image30](../../assets/5d7c0ef3384340b48febb28ccdd2c517.png)

高斯核分解

![image31](../../assets/5cf44a8d7a894c5080e332313820fb40.png)

A \* B =C

A = a1 \* a2

a1 \*a2 \* B =C

![image32](../../assets/7c5f813245604814b32f71004d93071b.png)

这样的作用是什么：加速

![image33](../../assets/6bfa22634e994b16a3c8ebe01cc967fc.png)

## 5、噪声
- 椒盐噪声：包含随机出现的黑白像素
- 脉冲噪声：包含随机出现的白色像素
- 高斯噪声：从高斯正态分布中得出的强度变化
![image34](../../assets/7e1deaa71c9a4b4b84b8e0d0c4c1036d.png)

==降低高斯噪声（听不太懂==

![image35](../../assets/ac0e7d99d463413388f6d3dfe1c8c06a.png)

以较大的标准差进行平滑可以抑制噪声，但也会模糊图像

6、中值滤波器Median filtering

把元素从小到大排序，选择中间的值，作为滤波

这不是线性的操作，不是线性滤波器

但是很好地解决了椒盐噪声和白噪声的问题

![image36](../../assets/b8962be0274e4f8c845cf3fd052cefa6.png)

中值滤波：排序，非线性

高斯滤波：加权求和，线性操作

![image37](../../assets/aae26751c6aa48f993a2a05aeba6b561.png)

![image38](../../assets/4484ce4a850c45bc8c0ffa886dde5302.png)

中值滤波的点都是来自原图像

加权的值可能都变

![image39](../../assets/db61117431c9417f81cb5adccd08765c.png)

![image40](../../assets/e86cf4fd488c4fc68b3ca1f79bb15f72.png)

![image41](../../assets/a40e70ba9def4a87b79d51e6105d93ae.png)

