---
title: 通信要素2：网络协议
updated: 2020-09-22T09:20:22.0000000+08:00
created: 2020-09-18T19:29:18.0000000+08:00
---

## 一、概述
1，传输层协议中有两个非常重要的协议：
Ø 传输控制协议TCP(Transmission Control Protocol)
Ø 用户数据报协议UDP(User Datagram Protocol)。
lTCP/IP 以其两个主要协议：传输控制协议(TCP)和网络互联协议(IP)而得 名，实际上是一组协议，包括多个具有不同功能且互为关联的协议。
lIP(Internet Protocol)协议是网络层的主要协议，支持网间互连的数据通信。
lTCP/IP协议模型从更实用的角度出发，形成了高效的四层体系结构，即 物理链路层、IP层、传输层和应用层

TCP 和 UDP
l TCP协议：
Ø 使用TCP协议前，须先建立TCP连接，形成传输数据通道
Ø 传输前，采用“三次握手”方式，点对点通信，是可靠的
Ø TCP协议进行通信的两个应用进程：客户端、服务端。
Ø 在连接中可进行大数据量的传输
Ø 传输完毕，需释放已建立的连接，效率低
![image1](../../../assets/99472ad91bc14a58a0f844b1719434c3.png)

![image2](../../../assets/9171a7993296420fbc390b9dd2af3f84.png)

l UDP协议：
Ø 将数据、源、目的封装成数据包，不需要建立连接
Ø 每个数据报的大小限制在64K内
Ø 发送不管对方是否准备好，接收方收到也不确认，故是不可靠的
Ø 可以广播发送 Ø 发送数据结束时无需释放资源，开销小，速度快

## 二、Socket
1，利用套接字(Socket)开发网络应用程序早已被广泛的采用，以至于成为事实 上的标准。 ,
2，网络上具有**唯一标识的IP地址和端口号组合**在一起才能构成唯一能识别的标 识符套接字。
3，通**信的两端都要有Socket，是两台机器间通信的端点**。
网络通信其实就是Socket间的通信。
4， Socket允许程序把网络连接当成一个流，数据在两个Socket间通过IO传输。
5，一般主动发起通信的应用程序属客户端，等待通信请求的为服务端。
Socket分类：
Ø流套接字（stream socket）：使用TCP提供可依赖的字节流服务
数据报套接字（datagram socket）：使用UDP提供“尽力而为”的数据报服务

**Socket类的常用构造器：**
| **public Socket(InetAddress address,int port)** | **创建一个流套接字并将其连接到指定IP 地址的指定端口号。** |
|-------------------------------------------------|-----------------------------------------------------------|
| **public Socket(String host,int port)**         | **创建一个流套接字并将其连接到指定主机上的指定端口号。**  |

Socket类的常用方法：
| public InputStream getInputStream()   | 返回此套接字的输入流。可以用于接收网络消息                                                                                                                                                                                           |
|---------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| public OutputStream getOutputStream() | 返回此套接字的输出流。可以用于发送网络消息                                                                                                                                                                                           |
| public InetAddress getInetAddress()   | 此套接字连接到的远程 IP 地址；如果套接字是未连接的，则返回 null。                                                                                                                                                                    |
| public InetAddress getLocalAddress()  | 获取套接字绑定的本地地址。 即本端的IP地址                                                                                                                                                                                            |
| public int getPort()                  | 此套接字连接到的远程端口号；如果尚未连接套接字，则返回0。                                                                                                                                                                            |
| public int getLocalPort()             | 返回此套接字绑定到的本地端口。 如果尚未绑定套接字，则返回 -1。即本端的 端口号。                                                                                                                                                      |
| public void close()                   | 关闭此套接字。套接字被关闭后，便不可在以后的网络连接中使用（即无法重新连接 或重新绑定）。需要创建新的套接字对象。 关闭此套接字也将会关闭该套接字的 InputStream 和 OutputStream。                                                     |
| public void shutdownInput()           | 如果在套接字上调用 shutdownInput() 后从套接字输入流读取内容，则流将 返回 EOF（文件结束符）。即不能在从此套接字的输入流中接收任何数据。                                                                                               |
| public void shutdownOutput()          | 禁用此套接字的输出流。对于 TCP 套接字，任何以前写入的数据都将被发 送，并且后跟 TCP 的正常连接终止序列。 如果在套接字上调用 shutdownOutput() 后写入套接字输出流， 则该流将抛出 IOException。 即不能通过此套接字的输出流发送任何数据。 |

